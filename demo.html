<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Document</title>
    <style>
        .time {
            font-size: 80px;
        }
        #debug {
            position:absolute;
            right:0;
            top:0;
            height:100%;
            width:20%;
            background-color:rgba(0,0,0,0.75);
            color:white;
        }
        #debug.hidden {
            right: 10px;
        }
    </style>
</head>
<body>

    <div id="tabata">
        <div>
            Time Elapsed:
            <div id="time" class="time">00:00</div>
        </div>
        <div>
            Time Remaining
            <div id="timeRemaining" class="time">00:00</div>
        </div>
        <div>
            Round Elapsed:
            <div id="roundTime" class="time">00:00</div>
        </div>
        <div>
            Round Time Remaining
            <div id="roundTimeRemaining" class="time">00:00</div>
        </div>
        <button id="start">Start</button>
        <button id="stop">Stop</button>
    </div>
    <div id="debug">
        
    </div>

    <script src="src/tabata.js"></script>
    <script>
    (function(){
        var body = document.getElementsByTagName('body')[0];
        var time = document.getElementById('time');
        var timeRemainging = document.getElementById('timeRemaining');
        var roundTime = document.getElementById('roundTime');
        var roundtimeRemainging = document.getElementById('roundTimeRemaining');
        var timer = new Tabata(
            [{
                'events': [{
                    'warmup': '10s'
                }]
            }, {
                'events': [{
                    'on': '10s'
                }, {
                    'off': '5s'
                }],
                'rounds': 1
            }, {
                'events': [{
                    'on': '3s'
                }, {
                    'off': '2s'
                }],
                'rounds': 2
            }, {
                'events': [{'cooldown': '10s'}]
            }], 100, {});
        document.getElementById('start').addEventListener('click', timer.start);
        document.getElementById('stop').addEventListener('click', timer.stop);
        timer.on('second', function(){
            time.textContent = timer.timeElapsed();
            timeRemaining.textContent = timer.timeRemaining();
            roundTime.textContent = timer.roundTimeElapsed();
            roundTimeRemaining.textContent = timer.roundTimeRemaining();
            document.getElementById('debug').textContent = JSON.stringify(timer);
        });
        timer.on('on', function(){
            body.style.background = 'green';
        });
        timer.on('off', function(){
            body.style.background = 'red';
        });
        timer.on('finish', function(){
            body.style.background = 'yellow';
        });
    })();
    </script>
</body>
</html>
